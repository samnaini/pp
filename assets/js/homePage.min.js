jQuery(a=>{new PPVue({el:"#pp-app",data:function(){return{basename:"",parcelpanel:parcelpanel_param,pageParam:pp_param,checked:false,isOpenModal:false,isDropshippingModeBtnLoading:false,showPostLayer:true,route:{fullPath:"",hash:"",query:{},path:"",href:""}}},created(){this.parseRoute();window.onhashchange=()=>{this.parseRoute()}},mounted(){if(pp_auth_key&&!pp_is_empty_api_kay)this.bindWithParcelPanel()},methods:{parseRoute(){const e=window.location.hash;const a=e.replace(/^#/,"");let t=a;const s=t.indexOf("#");if(s!==-1){this.route.hash=t.substring(s);t=t.substring(0,s)}const i=t.indexOf("?");if(i!==-1){t=t.substring(0,i)}const o=t;this.route={...this.route,fullPath:a,path:o,href:e}},bindWithParcelPanel(){a.ajax({type:"POST",url:`${ajaxurl}?action=pp_bind&_ajax_nonce=${pp_bind_account}`,data:{auth_key:pp_auth_key},success:e=>{if(e.success!==true){a.toastr.warning(e.msg||"Failed to connect.");return}a.toastr.success(e.msg||"Connected successfully.");if(e.redirect){window.history.replaceState({},document.title,e.redirect)}}})},modal:function(){window.location.hash="#/import-tracking"},previewTrackPage(){window.open(this.pageParam.preview_track_link)},jumpToSettingsPage(){location.href=this.pageParam.settings_page_link},onClickEnableDropshippingMode(){this.isDropshippingModeBtnLoading=true;a.ajax({type:"POST",url:`${ajaxurl}?action=pp_enable_dropshipping_mode&_ajax_nonce=${pp_enable_dropshipping_nonce}`,complete:()=>{this.isDropshippingModeBtnLoading=false},success:e=>{a.toastr.success(e.msg)},error(){a.toastr.error("Server error, please try again or refresh the page")}})},onContactUs(){window.PPLiveChat("showNewMessage","Hi support, my tracking page looks not so good, can you check it for me?")},isShowDetailView:function(e){this.isShowDetails=!this.isShowDetails;if(this.isShowDetails){this.Details=e}},handlePostLayerShow(e){this.showPostLayer=e}}})});